<div>
    <p-menubar>
        <ng-template pTemplate="start">
            <img
                src="https://laparisina.co/wp-content/uploads/2021/10/reposteria-francesa-medellin.png"
                height="50"
                class="mr-2"
            />
        </ng-template>
        <ng-template pTemplate="end">
            <button
                type="button"
                icon="pi pi-shopping-cart"
                pButton
                label="{{ productosCarrito.length }}"
                (click)="op2.toggle($event)"
                class="p-button-text p-button-lg ml-4"
            ></button>
            <p-overlayPanel
                #op2
                [showCloseIcon]="false"
                [style]="{ width: '40%' }"
            >
                <ng-template pTemplate>
                    <p-toolbar styleClass="mb-4">
                        <ng-template pTemplate="left">
                            <button
                                pButton
                                type="button"
                                label="Hacer pedido"
                                class="p-button-text p-button-lg ml-4"
                            ></button>
                        </ng-template>

                        <ng-template pTemplate="right">
                            <div
                                style="
                                    display: flex;
                                    flex-direction: column;
                                    align-items: center;
                                    margin-bottom: -20px;
                                "
                            >
                                <h5 class="mb-0">Total pedido:</h5>
                                <h5 class="mt-2">
                                    {{ totalCarrito | number }}
                                </h5>
                            </div>
                        </ng-template>
                    </p-toolbar>

                    <p-table
                        [value]="productosCarrito"
                        selectionMode="single"
                        [(selection)]="selectedProduct"
                        (onRowSelect)="op2.hide()"
                        responsiveLayout="scroll"
                    >
                        <ng-template pTemplate="header">
                            <tr>
                                <th style="min-width: 12rem">Producto</th>
                                <th style="max-width: 8rem">Precio Und</th>
                                <th style="max-width: 8rem">Cantidad</th>
                                <th style="min-width: 8rem">Precio Total</th>
                                <th style="max-width: 3rem">Borrar</th>
                            </tr>
                        </ng-template>
                        <ng-template pTemplate="body" let-rowData let-product>
                            <tr [pSelectableRow]="rowData">
                                <td>{{ product.nombre_producto }}</td>
                                <td>{{ product.precio_ico | number }}</td>
                                <td>{{ product.cantidad_producto }}</td>
                                <td>
                                    {{ product.precio_total_producto | number }}
                                </td>
                                <td>
                                    <button
                                        pButton
                                        pRipple
                                        icon="pi pi-times"
                                        class="p-button-rounded p-button-danger mr-2"
                                        (click)="
                                            eliminarProductoCarrito(product)
                                        "
                                    ></button>
                                </td>
                            </tr>
                        </ng-template>
                    </p-table>
                </ng-template>
            </p-overlayPanel>

            <!-- <button pButton type="button" icon="pi pi-shopping-cart" class="p-button-text p-button-lg ml-3"></button> -->
            <button
                pButton
                type="button"
                (click)="visibleSidebarCarrito = true"
                icon="pi pi-sign-out"
                class="p-button-text p-button-lg ml-4"
            ></button>
        </ng-template>
    </p-menubar>
</div>
<div class="card">
    <h1>CREAR PEDIDO CLIENTE</h1>
    <div class="grid p-fluid mt-3">
        <!-- Cedula Cliente-->
        <div class="field col-12 md:col-3">
            <span class="p-float-label">
                <input inputId="documento_cliente" pInputText />
                <label for="inputtext">Cedula</label>
            </span>
        </div>
        <!-- nombre Cliente -->
        <div class="field col-12 md:col-3">
            <span class="p-float-label">
                <input inputId="nombre_contacto" pInputText />
                <label for="inputtext">Nombre Cliente</label>
            </span>
        </div>
        <div class="field col-12 md:col-3">
            <span class="p-float-label">
                <input type="text" id="quien_recibe" pInputText />
                <label for="inputtext">Quien Recibe</label>
            </span>
        </div>
        <!-- Ciudad Cliente -->
        <div class="field col-12 md:col-3">
            <span class="p-float-label">
                <input type="text" id="ciudad_cliente" pInputText />
                <label for="inputtext">Ciudad</label>
            </span>
        </div>
        <!-- Barrio Cliente -->
        <div class="field col-12 md:col-3">
            <span class="p-float-label">
                <input type="text" id="barrio_cliente" pInputText />
                <label for="inputtext">Barrio</label>
            </span>
        </div>

        <!-- Dirección Entrega -->
        <div class="field col-12 md:col-3">
            <span class="p-float-label">
                <input
                    style="resize: none"
                    type="text"
                    id="direccion_entrega"
                    pInputText
                />
                <label for="inputtext">Dirección</label>
            </span>
        </div>
        <!-- Fecha Entrega Pedido -->
        <div class="field col-12 md:col-3">
            <span class="p-float-label">
                <p-calendar
                    dateFormat="yy/mm/dd"
                    inputId="calendar"
                ></p-calendar>
                <label for="calendar">Fecha Entrega</label>
            </span>
        </div>

        <!-- Método de Pago -->
        <div class="field col-12 md:col-3">
            <span class="p-float-label">
                <p-dropdown
                    inputId="dropdown"
                    id="metodo_pago"
                    [autoDisplayFirst]="false"
                ></p-dropdown>
                <label for="dropdown">Método de Pago</label>
            </span>
        </div>
        <br><br>
   
    </div>
</div>

<div class="card">
    <div class="text-center"> <!-- Agregamos esta clase para centrar el contenido -->
        <div class="grid p-fluid mt-3 table-container">
            <p-table>
                <ng-template pTemplate="header">
                    <tr>
                        <th colspan="12">Lista de Productos</th>
                    </tr>
                    <tr>
                        <th>Nombre Producto</th>
                        <th>Categoria</th>
                        <th>cantidad</th>
                        <th>Precio Unitario</th>
                        <th>SubTotal</th>
                        <th>Accion</th>
                    </tr>
                </ng-template>
                <ng-template pTemplate="body" let-product>
                    <tr>
                        <td>{{ product.get("nombre_producto")?.value }}</td>
                        <td>{{ product.get("nombre_categoria_producto")?.value }}</td>
                        <td>{{ product.get("cantidad_producto")?.value }}</td>
                        <td>
                            {{
                                pedido.get("tipo_cliente").value ===
                                "Persona jurídica"
                                    ? product.get("precio_por_mayor_ico")?.value
                                    : product.get("precio_ico")?.value
                            }}
                        </td>
                        <td>{{ product.get("precio_total_producto")?.value }}</td>
                        <td>
                            <button
                                pButton
                                pRipple
                                icon="pi pi-times"
                                class="p-button-rounded p-button-danger mr-2"
                                (click)="eliminarProducto(product)"
                                style="width: 2.5rem; height: 2.5rem"
                            ></button>
                        </td>
                    </tr>
                </ng-template>
            </p-table>
        </div>
        <br>
        <div class="my-2">
            <button
                pButton
                pRipple
                label="Crear Pedido"
                icon="pi pi-user-plus"
                class="p-button-success mr-2"
            ></button>
            <button
                pButton
                pRipple
                label="Cancelar"
                icon="pi pi-user-plus"
                class="p-button-danger mr-2"
            ></button>
        </div>
    </div>
</div>


